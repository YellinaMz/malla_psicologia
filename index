<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Interactiva Psicología ULagos</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
    h1 { text-align: center; }
    .semestre { margin-bottom: 30px; }
    .semestre h2 { background: #222; color: #fff; padding: 10px; }
    .asignatura { 
      padding: 10px; 
      margin: 5px 0; 
      background: #eee; 
      border-left: 10px solid #ccc; 
      cursor: pointer; 
    }
    .aprobada { background: #c8e6c9; border-left-color: #2e7d32; }
    .bloqueada { background: #eee; color: #999; cursor: not-allowed; }
  </style>
</head>
<body>
  <h1>Malla Interactiva Psicología ULagos</h1>
  <div id="malla"></div>

  <script>
    const ramos = [
      { semestre: 1, codigo: "PSIC001", nombre: "Enfoques psicológicos" },
      { semestre: 1, codigo: "PSIC002", nombre: "Bases biológicas del comportamiento" },
      { semestre: 1, codigo: "PSIC003", nombre: "Socioantropología" },
      { semestre: 1, codigo: "PSIC004", nombre: "Epistemología y filosofía" },
      { semestre: 1, codigo: "PSIC005", nombre: "Desarrollo personal e integración I" },
      { semestre: 1, codigo: "PSIC006", nombre: "Competencias transversales I" },
      { semestre: 1, codigo: "CTRAP I", nombre: "TICS" },
      
      { semestre: 2, codigo: "PSIC006P", nombre: "Procesos Psicológicos", requisitos: ["PSIC001"] },
      { semestre: 2, codigo: "PSIC007", nombre: "Ciclo Vital I" },
      { semestre: 2, codigo: "PSIC008", nombre: "Neuropsicología", requisitos: ["PSIC002"] },
      { semestre: 2, codigo: "PSIC009", nombre: "Bases sociales del Comportamiento", requisitos: ["PSIC003"] },
      { semestre: 2, codigo: "PSIC010", nombre: "Desarrollo personal e integración II", requisitos: ["PSIC005"] },
      { semestre: 2, codigo: "CTRAP III", nombre: "Competencias transversales II", requisitos: ["CTRAP I"] }
    ];

    const malla = document.getElementById("malla");

    const aprobadas = new Set();

    function puedeDesbloquear(ramo) {
      if (!ramo.requisitos) return true;
      return ramo.requisitos.every(req => aprobadas.has(req));
    }

    function renderMalla() {
      malla.innerHTML = "";
      for (let s = 1; s <= 10; s++) {
        const cont = document.createElement("div");
        cont.className = "semestre";
        cont.innerHTML = `<h2>Semestre ${s}</h2>`;
        const delSemestre = ramos.filter(r => r.semestre === s);
        delSemestre.forEach(r => {
          const div = document.createElement("div");
          const desbloqueado = puedeDesbloquear(r);
          div.textContent = `${r.codigo} - ${r.nombre}`;
          div.className = "asignatura";
          if (!desbloqueado && !aprobadas.has(r.codigo)) {
            div.classList.add("bloqueada");
          } else if (aprobadas.has(r.codigo)) {
            div.classList.add("aprobada");
          }
          div.onclick = () => {
            if (!desbloqueado && !aprobadas.has(r.codigo)) return;
            if (aprobadas.has(r.codigo)) {
              aprobadas.delete(r.codigo);
            } else {
              aprobadas.add(r.codigo);
            }
            renderMalla();
          }
          cont.appendChild(div);
        });
        malla.appendChild(cont);
      }
    }

    renderMalla();
  </script>
</body>
</html>
